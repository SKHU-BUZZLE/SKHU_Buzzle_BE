{"ast":null,"code":"var _jsxFileName = \"/Users/inho/Desktop/\\u1106\\u116E\\u110C\\u1166 \\u1111\\u1169\\u11AF\\u1103\\u1165 2/SKHU_Buzzle_BE/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Client } from '@stomp/stompjs';\nimport SockJS from 'sockjs-client';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8080';\nfunction App() {\n  _s();\n  const [jwt, setJwt] = useState('');\n  const [stompClient, setStompClient] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [roomDetails, setRoomDetails] = useState(null);\n  const [isHost, setIsHost] = useState(false);\n  const [gameInfo, setGameInfo] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [gameResult, setGameResult] = useState(null);\n\n  // 입력용 상태\n  const [inviteCodeInput, setInviteCodeInput] = useState('');\n  const [maxPlayers, setMaxPlayers] = useState(2);\n  const [category, setCategory] = useState('ALL');\n  const [quizCount, setQuizCount] = useState(3);\n  const stompClientRef = useRef(null);\n  stompClientRef.current = stompClient;\n  const log = message => {\n    console.log(message);\n    const timestamp = new Date().toLocaleTimeString();\n    const formattedMessage = typeof message === 'object' ? JSON.stringify(message, null, 2) : message;\n    setLogs(prevLogs => [`[${timestamp}] ${formattedMessage}`, ...prevLogs]);\n  };\n  useEffect(() => {\n    return () => {\n      if (stompClientRef.current) {\n        log('Disconnecting...');\n        stompClientRef.current.deactivate();\n      }\n    };\n  }, []);\n  const handleCreateRoom = async () => {\n    if (!jwt) {\n      log('JWT 토큰을 입력하세요.');\n      return;\n    }\n    log('방 생성 요청...');\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/multi-room`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${jwt}`\n        },\n        body: JSON.stringify({\n          maxPlayers,\n          category,\n          quizCount\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        log('방 생성 성공:');\n        log(data.data);\n        setInviteCodeInput(data.data.inviteCode);\n      } else {\n        log(`방 생성 실패: ${data.message}`);\n      }\n    } catch (error) {\n      log(`방 생성 에러: ${error.message}`);\n    }\n  };\n  const handleJoinRoom = () => {\n    if (!jwt) {\n      log('JWT 토큰을 입력하세요.');\n      return;\n    }\n    if (!inviteCodeInput) {\n      log('초대 코드를 입력하세요.');\n      return;\n    }\n    if (stompClient) {\n      log('이미 연결되어 있습니다. 연결을 해제하고 다시 시도합니다.');\n      stompClient.deactivate();\n    }\n    log(`연결 시도... (Token: ${jwt.substring(0, 10)}...)`);\n    const client = new Client({\n      webSocketFactory: () => new SockJS(`${API_BASE_URL}/chat?authorization=${jwt}`),\n      onConnect: () => {\n        log('✅ WebSocket 연결 성공!');\n        setStompClient(client);\n\n        // 개인 메시지 구독 (초기 방 정보 획득)\n        client.subscribe('/user/queue/room', message => {\n          const body = JSON.parse(message.body);\n          log('📥 [개인 메시지 수신]:');\n          log(body);\n          if (body.type === 'JOINED_ROOM') {\n            const initialRoomDetails = body.data;\n            // 초기 플레이어 목록 설정\n            setRoomDetails(initialRoomDetails);\n\n            // 방장 여부 확인\n            if (initialRoomDetails.players.length === 1 && initialRoomDetails.players[0].name === initialRoomDetails.hostName) {\n              setIsHost(true);\n              log('👑 당신이 방장입니다.');\n            }\n          }\n        });\n\n        // 방 전체 메시지 구독\n        client.subscribe(`/topic/room/${inviteCodeInput}`, message => {\n          const body = JSON.parse(message.body);\n          log(`📥 [${inviteCodeInput} 방 메시지 수신]:`);\n          log(body);\n          switch (body.type) {\n            case 'PLAYER_JOINED':\n              setRoomDetails(prev => {\n                if (!prev) return null;\n                // 중복 입장 방지\n                if (prev.players.some(p => p.email === body.email)) return prev;\n                const newPlayer = {\n                  email: body.email,\n                  name: body.name,\n                  picture: body.picture,\n                  isHost: prev.players.length === 0 // 첫 플레이어는 방장\n                };\n                const newPlayers = [...prev.players, newPlayer];\n                return {\n                  ...prev,\n                  players: newPlayers,\n                  currentPlayerCount: newPlayers.length,\n                  canStartGame: newPlayers.length >= 2\n                };\n              });\n              break;\n            case 'PLAYER_LEFT':\n              setRoomDetails(prev => {\n                if (!prev) return null;\n                const newPlayers = prev.players.filter(p => p.email !== body.email);\n                return {\n                  ...prev,\n                  players: newPlayers,\n                  currentPlayerCount: newPlayers.length,\n                  canStartGame: newPlayers.length >= 2\n                };\n              });\n              break;\n            case 'MESSAGE':\n              alert(body.message); // 방 폭파 등 중요 메시지\n              handleDisconnect();\n              break;\n            case 'GAME_START':\n              setGameInfo({\n                totalQuestions: body.totalQuestions\n              });\n              setCurrentQuestion(null);\n              setGameResult(null);\n              break;\n            case 'QUESTION':\n              setCurrentQuestion(body);\n              break;\n            case 'ANSWER_RESULT':\n              // UI에 정답 결과 표시 로직 (예: O/X 표시)\n              break;\n            case 'LEADERBOARD':\n              // UI에 리더보드 업데이트\n              break;\n            case 'GAME_END':\n              setGameResult(body);\n              setCurrentQuestion(null);\n              break;\n            default:\n              break;\n          }\n        });\n        log(`[${inviteCodeInput}] 방에 입장합니다...`);\n        client.publish({\n          destination: '/app/room/join',\n          body: JSON.stringify({\n            inviteCode: inviteCodeInput\n          })\n        });\n      },\n      onStompError: frame => {\n        log('Broker reported error: ' + frame.headers['message']);\n        log('Additional details: ' + frame.body);\n      },\n      onWebSocketError: event => {\n        log('WebSocket error: ' + event);\n      },\n      reconnectDelay: 5000\n    });\n    client.activate();\n  };\n  const handleStartGame = () => {\n    if (stompClient && roomDetails) {\n      log('게임 시작 요청!');\n      stompClient.publish({\n        destination: `/app/room/${roomDetails.roomId}/start`,\n        body: ''\n      });\n    }\n  };\n  const handleAnswerSubmit = answerIndex => {\n    if (stompClient && roomDetails && currentQuestion) {\n      log(`${answerIndex + 1}번 답변 제출`);\n      stompClient.publish({\n        destination: `/app/room/${roomDetails.roomId}/answer`,\n        body: JSON.stringify({\n          questionIndex: currentQuestion.questionIndex,\n          index: answerIndex\n        })\n      });\n    }\n  };\n  const handleDisconnect = () => {\n    if (stompClient) {\n      stompClient.deactivate();\n      setStompClient(null);\n      setRoomDetails(null);\n      setIsHost(false);\n      setGameInfo(null);\n      setCurrentQuestion(null);\n      setGameResult(null);\n      log('연결 해제');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Buzzle Multi-Room Tester\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"1. \\uC778\\uC99D (JWT)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"JWT Token\",\n          value: jwt,\n          onChange: e => setJwt(e.target.value),\n          className: \"jwt-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"2. \\uBC29 \\uC0DD\\uC131 (\\uBC29\\uC7A5\\uC6A9)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Max Players: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: maxPlayers,\n            onChange: e => setMaxPlayers(parseInt(e.target.value)),\n            min: \"2\",\n            max: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Category: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: category,\n            onChange: e => setCategory(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ALL\",\n              children: \"ALL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"DATA_STRUCTURE\",\n              children: \"DATA_STRUCTURE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"OS\",\n              children: \"OS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"NETWORK\",\n              children: \"NETWORK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Quiz Count: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: quizCount,\n            onChange: e => setQuizCount(parseInt(e.target.value)),\n            min: \"3\",\n            max: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCreateRoom,\n          children: \"\\uBC29 \\uC0DD\\uC131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"3. \\uBC29 \\uCC38\\uAC00 (\\uBAA8\\uB450)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\uCD08\\uB300 \\uCF54\\uB4DC\",\n          value: inviteCodeInput,\n          onChange: e => setInviteCodeInput(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleJoinRoom,\n          disabled: !!stompClient,\n          children: \"\\uCC38\\uAC00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDisconnect,\n          disabled: !stompClient,\n          children: \"\\uB098\\uAC00\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this), roomDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"4. \\uBC29 \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uCD08\\uB300 \\uCF54\\uB4DC:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 28\n          }, this), \" \", roomDetails.inviteCode]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uBC29\\uC7A5:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 28\n          }, this), \" \", roomDetails.hostName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uC778\\uC6D0:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 28\n          }, this), \" \", roomDetails.currentPlayerCount, \" / \", roomDetails.maxPlayers]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD50C\\uB808\\uC774\\uC5B4 \\uBAA9\\uB85D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: roomDetails.players.map((p, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [p.name, \" \", p.isHost ? '👑' : '']\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 64\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }, this), isHost && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleStartGame,\n          disabled: !roomDetails.canStartGame,\n          children: \"\\uAC8C\\uC784 \\uC2DC\\uC791\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 36\n        }, this), !roomDetails.canStartGame && isHost && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"2\\uBA85 \\uC774\\uC0C1\\uC774\\uC5B4\\uC57C \\uC2DC\\uC791\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 65\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this), gameInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"5. \\uAC8C\\uC784 \\uC9C4\\uD589\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 25\n        }, this), currentQuestion ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Question \", currentQuestion.questionIndex + 1, \"/\", gameInfo.totalQuestions]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: currentQuestion.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: currentQuestion.options.map((opt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleAnswerSubmit(index),\n                children: [index + 1, \". \", opt]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 45\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uB2E4\\uC74C \\uBB38\\uC81C\\uB97C \\uAE30\\uB2E4\\uB9AC\\uB294 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 29\n        }, this), gameResult && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uAC8C\\uC784 \\uC885\\uB8CC!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83C\\uDFC6 \\uC2B9\\uC790: \", gameResult.winnerName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logs-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Logs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logs\",\n        children: logs.map((logMsg, i) => /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: logMsg\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 46\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"jjVuuw7Tp279AdapbgsrUNKXZ0s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Client","SockJS","jsxDEV","_jsxDEV","API_BASE_URL","App","_s","jwt","setJwt","stompClient","setStompClient","logs","setLogs","roomDetails","setRoomDetails","isHost","setIsHost","gameInfo","setGameInfo","currentQuestion","setCurrentQuestion","gameResult","setGameResult","inviteCodeInput","setInviteCodeInput","maxPlayers","setMaxPlayers","category","setCategory","quizCount","setQuizCount","stompClientRef","current","log","message","console","timestamp","Date","toLocaleTimeString","formattedMessage","JSON","stringify","prevLogs","deactivate","handleCreateRoom","response","fetch","method","headers","body","data","json","ok","inviteCode","error","handleJoinRoom","substring","client","webSocketFactory","onConnect","subscribe","parse","type","initialRoomDetails","players","length","name","hostName","prev","some","p","email","newPlayer","picture","newPlayers","currentPlayerCount","canStartGame","filter","alert","handleDisconnect","totalQuestions","publish","destination","onStompError","frame","onWebSocketError","event","reconnectDelay","activate","handleStartGame","roomId","handleAnswerSubmit","answerIndex","questionIndex","index","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","parseInt","min","max","onClick","disabled","map","i","question","options","opt","winnerName","logMsg","_c","$RefreshReg$"],"sources":["/Users/inho/Desktop/무제 폴더 2/SKHU_Buzzle_BE/frontend/src/App.js"],"sourcesContent":["\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Client } from '@stomp/stompjs';\nimport SockJS from 'sockjs-client';\nimport './App.css';\n\nconst API_BASE_URL = 'http://localhost:8080';\n\nfunction App() {\n    const [jwt, setJwt] = useState('');\n    const [stompClient, setStompClient] = useState(null);\n    const [logs, setLogs] = useState([]);\n    const [roomDetails, setRoomDetails] = useState(null);\n    const [isHost, setIsHost] = useState(false);\n    const [gameInfo, setGameInfo] = useState(null);\n    const [currentQuestion, setCurrentQuestion] = useState(null);\n    const [gameResult, setGameResult] = useState(null);\n\n    // 입력용 상태\n    const [inviteCodeInput, setInviteCodeInput] = useState('');\n    const [maxPlayers, setMaxPlayers] = useState(2);\n    const [category, setCategory] = useState('ALL');\n    const [quizCount, setQuizCount] = useState(3);\n\n    const stompClientRef = useRef(null);\n    stompClientRef.current = stompClient;\n\n    const log = (message) => {\n        console.log(message);\n        const timestamp = new Date().toLocaleTimeString();\n        const formattedMessage = typeof message === 'object' ? JSON.stringify(message, null, 2) : message;\n        setLogs(prevLogs => [`[${timestamp}] ${formattedMessage}`, ...prevLogs]);\n    };\n\n    useEffect(() => {\n        return () => {\n            if (stompClientRef.current) {\n                log('Disconnecting...');\n                stompClientRef.current.deactivate();\n            }\n        };\n    }, []);\n\n    const handleCreateRoom = async () => {\n        if (!jwt) {\n            log('JWT 토큰을 입력하세요.');\n            return;\n        }\n        log('방 생성 요청...');\n        try {\n            const response = await fetch(`${API_BASE_URL}/api/multi-room`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${jwt}`\n                },\n                body: JSON.stringify({ maxPlayers, category, quizCount })\n            });\n\n            const data = await response.json();\n            if (response.ok) {\n                log('방 생성 성공:');\n                log(data.data);\n                setInviteCodeInput(data.data.inviteCode);\n            } else {\n                log(`방 생성 실패: ${data.message}`);\n            }\n        } catch (error) {\n            log(`방 생성 에러: ${error.message}`);\n        }\n    };\n\n    const handleJoinRoom = () => {\n        if (!jwt) {\n            log('JWT 토큰을 입력하세요.');\n            return;\n        }\n        if (!inviteCodeInput) {\n            log('초대 코드를 입력하세요.');\n            return;\n        }\n\n        if (stompClient) {\n            log('이미 연결되어 있습니다. 연결을 해제하고 다시 시도합니다.');\n            stompClient.deactivate();\n        }\n\n        log(`연결 시도... (Token: ${jwt.substring(0, 10)}...)`);\n\n        const client = new Client({\n            webSocketFactory: () => new SockJS(`${API_BASE_URL}/chat?authorization=${jwt}`),\n            onConnect: () => {\n                log('✅ WebSocket 연결 성공!');\n                setStompClient(client);\n\n                // 개인 메시지 구독 (초기 방 정보 획득)\n                client.subscribe('/user/queue/room', (message) => {\n                    const body = JSON.parse(message.body);\n                    log('📥 [개인 메시지 수신]:');\n                    log(body);\n                    if (body.type === 'JOINED_ROOM') {\n                        const initialRoomDetails = body.data;\n                        // 초기 플레이어 목록 설정\n                        setRoomDetails(initialRoomDetails);\n                        \n                        // 방장 여부 확인\n                        if (initialRoomDetails.players.length === 1 && initialRoomDetails.players[0].name === initialRoomDetails.hostName) {\n                            setIsHost(true);\n                            log('👑 당신이 방장입니다.');\n                        }\n                    }\n                });\n\n                // 방 전체 메시지 구독\n                client.subscribe(`/topic/room/${inviteCodeInput}`, (message) => {\n                    const body = JSON.parse(message.body);\n                    log(`📥 [${inviteCodeInput} 방 메시지 수신]:`);\n                    log(body);\n\n                    switch (body.type) {\n                        case 'PLAYER_JOINED':\n                            setRoomDetails(prev => {\n                                if (!prev) return null;\n                                // 중복 입장 방지\n                                if (prev.players.some(p => p.email === body.email)) return prev;\n\n                                const newPlayer = { \n                                    email: body.email, \n                                    name: body.name, \n                                    picture: body.picture, \n                                    isHost: prev.players.length === 0 // 첫 플레이어는 방장\n                                };\n\n                                const newPlayers = [...prev.players, newPlayer];\n                                return {\n                                    ...prev,\n                                    players: newPlayers,\n                                    currentPlayerCount: newPlayers.length,\n                                    canStartGame: newPlayers.length >= 2\n                                };\n                            });\n                            break;\n                        case 'PLAYER_LEFT':\n                            setRoomDetails(prev => {\n                                if (!prev) return null;\n                                const newPlayers = prev.players.filter(p => p.email !== body.email);\n                                return {\n                                    ...prev,\n                                    players: newPlayers,\n                                    currentPlayerCount: newPlayers.length,\n                                    canStartGame: newPlayers.length >= 2\n                                };\n                            });\n                            break;\n                        case 'MESSAGE':\n                            alert(body.message); // 방 폭파 등 중요 메시지\n                            handleDisconnect();\n                            break;\n                        case 'GAME_START':\n                            setGameInfo({ totalQuestions: body.totalQuestions });\n                            setCurrentQuestion(null);\n                            setGameResult(null);\n                            break;\n                        case 'QUESTION':\n                            setCurrentQuestion(body);\n                            break;\n                        case 'ANSWER_RESULT':\n                             // UI에 정답 결과 표시 로직 (예: O/X 표시)\n                            break;\n                        case 'LEADERBOARD':\n                            // UI에 리더보드 업데이트\n                            break;\n                        case 'GAME_END':\n                            setGameResult(body);\n                            setCurrentQuestion(null);\n                            break;\n                        default:\n                            break;\n                    }\n                });\n\n                log(`[${inviteCodeInput}] 방에 입장합니다...`);\n                client.publish({\n                    destination: '/app/room/join',\n                    body: JSON.stringify({ inviteCode: inviteCodeInput })\n                });\n            },\n            onStompError: (frame) => {\n                log('Broker reported error: ' + frame.headers['message']);\n                log('Additional details: ' + frame.body);\n            },\n            onWebSocketError: (event) => {\n                log('WebSocket error: ' + event);\n            },\n            reconnectDelay: 5000,\n        });\n\n        client.activate();\n    };\n\n    const handleStartGame = () => {\n        if (stompClient && roomDetails) {\n            log('게임 시작 요청!');\n            stompClient.publish({\n                destination: `/app/room/${roomDetails.roomId}/start`,\n                body: ''\n            });\n        }\n    };\n    \n    const handleAnswerSubmit = (answerIndex) => {\n        if (stompClient && roomDetails && currentQuestion) {\n            log(`${answerIndex + 1}번 답변 제출`);\n            stompClient.publish({\n                destination: `/app/room/${roomDetails.roomId}/answer`,\n                body: JSON.stringify({ \n                    questionIndex: currentQuestion.questionIndex,\n                    index: answerIndex \n                })\n            });\n        }\n    };\n\n    const handleDisconnect = () => {\n        if (stompClient) {\n            stompClient.deactivate();\n            setStompClient(null);\n            setRoomDetails(null);\n            setIsHost(false);\n            setGameInfo(null);\n            setCurrentQuestion(null);\n            setGameResult(null);\n            log('연결 해제');\n        }\n    };\n\n\n    return (\n        <div className=\"App\">\n            <div className=\"container\">\n                <h1>Buzzle Multi-Room Tester</h1>\n                <div className=\"section\">\n                    <h2>1. 인증 (JWT)</h2>\n                    <input\n                        type=\"text\"\n                        placeholder=\"JWT Token\"\n                        value={jwt}\n                        onChange={(e) => setJwt(e.target.value)}\n                        className=\"jwt-input\"\n                    />\n                </div>\n\n                <hr />\n\n                <div className=\"section\">\n                    <h2>2. 방 생성 (방장용)</h2>\n                    <div>\n                        <label>Max Players: </label>\n                        <input type=\"number\" value={maxPlayers} onChange={e => setMaxPlayers(parseInt(e.target.value))} min=\"2\" max=\"10\" />\n                    </div>\n                    <div>\n                        <label>Category: </label>\n                        <select value={category} onChange={e => setCategory(e.target.value)}>\n                            <option value=\"ALL\">ALL</option>\n                            <option value=\"DATA_STRUCTURE\">DATA_STRUCTURE</option>\n                            <option value=\"OS\">OS</option>\n                            <option value=\"NETWORK\">NETWORK</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label>Quiz Count: </label>\n                        <input type=\"number\" value={quizCount} onChange={e => setQuizCount(parseInt(e.target.value))} min=\"3\" max=\"20\" />\n                    </div>\n                    <button onClick={handleCreateRoom}>방 생성</button>\n                </div>\n\n                <hr />\n\n                <div className=\"section\">\n                    <h2>3. 방 참가 (모두)</h2>\n                    <input\n                        type=\"text\"\n                        placeholder=\"초대 코드\"\n                        value={inviteCodeInput}\n                        onChange={(e) => setInviteCodeInput(e.target.value)}\n                    />\n                    <button onClick={handleJoinRoom} disabled={!!stompClient}>참가</button>\n                    <button onClick={handleDisconnect} disabled={!stompClient}>나가기</button>\n                </div>\n                \n                <hr />\n\n                {roomDetails && (\n                    <div className=\"section\">\n                        <h2>4. 방 정보</h2>\n                        <p><strong>초대 코드:</strong> {roomDetails.inviteCode}</p>\n                        <p><strong>방장:</strong> {roomDetails.hostName}</p>\n                        <p><strong>인원:</strong> {roomDetails.currentPlayerCount} / {roomDetails.maxPlayers}</p>\n                        <h3>플레이어 목록</h3>\n                        <ul>\n                            {roomDetails.players.map((p, i) => <li key={i}>{p.name} {p.isHost ? '👑' : ''}</li>)}\n                        </ul>\n                        {isHost && <button onClick={handleStartGame} disabled={!roomDetails.canStartGame}>게임 시작</button>}\n                        {!roomDetails.canStartGame && isHost && <p><small>2명 이상이어야 시작할 수 있습니다.</small></p>}\n                    </div>\n                )}\n\n                {gameInfo && (\n                     <div className=\"section\">\n                        <h2>5. 게임 진행</h2>\n                        {currentQuestion ? (\n                            <div>\n                                <h3>Question {currentQuestion.questionIndex + 1}/{gameInfo.totalQuestions}</h3>\n                                <p>{currentQuestion.question}</p>\n                                <ul>\n                                    {currentQuestion.options.map((opt, index) => (\n                                        <li key={index}>\n                                            <button onClick={() => handleAnswerSubmit(index)}>\n                                                {index + 1}. {opt}\n                                            </button>\n                                        </li>\n                                    ))}\n                                </ul>\n                            </div>\n                        ) : (\n                            <p>다음 문제를 기다리는 중...</p>\n                        )}\n                        {gameResult && (\n                            <div>\n                                <h3>게임 종료!</h3>\n                                <p>🏆 승자: {gameResult.winnerName}</p>\n                            </div>\n                        )}\n                    </div>\n                )}\n\n\n            </div>\n            <div className=\"logs-container\">\n                <h2>Logs</h2>\n                <div className=\"logs\">\n                    {logs.map((logMsg, i) => <pre key={i}>{logMsg}</pre>)}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}